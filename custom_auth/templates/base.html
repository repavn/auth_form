{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="2OfhsNe1ULvF-5Qv-8NLyv_YQTwwYEzsE9KUsrbNtG4" />
    <title>Registration/Login</title>
    <meta name="google-signin-client_id" content="250084795277-3uq4fb3umm94o94mmhl6i96g2tqk6krk.apps.googleusercontent.com">
    <style>
        #fbutton {
              background-color: white;
              border: none;
              color: #414d9f;
              /*padding: 15px 32px;*/
              text-align: center;
              text-decoration: none;
              display: inline-block;
              font-size: 16px;
              /*margin: 4px 2px;*/
              cursor: pointer;
            }
        .wrapper {
            width: 200px;
            display: flex;
            flex-direction: row;
            align-items: center;
        }
    </style>
</head>
<body>

    <script>
        $( document ).ready(function() {

            $( "#fbutton" ).click(function() {
                //     FB.AppEvents.logPageView();
                   FB.init({
                        appId: '2887198804733771',
                        autoLogAppEvents: true,
                        xfbml: true,
                        version: 'v7.0'
                    });

                    function getCurrentUserInfo() {
                        FB.api('/me?fields=name,first_name,last_name,email', function (userInfo) {
                            console.log('*************INFO')
                            console.log(userInfo.name + ': ' + userInfo.email);
                        });
                    }

                    // (function (d, s, id) {
                    //     var js, fjs = d.getElementsByTagName(s)[0];
                    //     if (d.getElementById(id)) {
                    //         return;
                    //     }
                    //     js = d.createElement(s);
                    //     js.id = id;
                    //     js.src = "https://connect.facebook.net/en_US/sdk.js";
                    //     fjs.parentNode.insertBefore(js, fjs);
                    // }(document, 'script', 'facebook-jssdk'));

                    FB.getLoginStatus(function (response) {
                        if (response.status === 'connected') {
                            getCurrentUserInfo(response);
                        } else {
                            FB.login(function (response) {
                                if (response.authResponse) {
                                    getCurrentUserInfo(response)
                                } else {
                                    console.log('Auth cancelled.')
                                }
                            }, {scope: 'email'});
                        }
                    });
                // }
            });
        });
    </script>

    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v7.0"></script>
    <div class="wrapper">
        <img height="20px" src="{% get_media_prefix %}fb.png"> <button id="fbutton">FACEBOOK</button>
    </div>

    <div style="width: 100%; height: 100%;">
        <div id="my-signin2" class="g-signin2" data-onsuccess="onSignIn"></div>
    </div>
    <script>
        function onSuccess(googleUser) {
            var profile = googleUser.getBasicProfile();
            console.log('ID: ' + profile.getId());
            console.log('Name: ' + profile.getName());
            console.log('Image URL: ' + profile.getImageUrl());
            console.log('Email: ' + profile.getEmail());
        }
        function onFailure(error) {
            console.log("Google login error");
        }
        function renderButton() {
          gapi.signin2.render('my-signin2', {
            'scope': 'profile email',
            'width': 140,
            'height': 50,
            'longtitle': false,
            'onsuccess': onSuccess,
            'onfailure': onFailure
          });

          let el = $('.abcRioButtonContentWrapper > span > span');
          el.text('GOOGLE');
          el.css('color', '#3398FF');
          let title = $('span.abcRioButtonContents');
          title.css('margin-left', '-15px');
        }
    </script>
    <script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>
</body>
</html>
